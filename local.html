<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super LS Manager</title>
    <style>
        /* --- CSS & Responsiveness --- */
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #121212; color: #f1f1f1; margin: 0; padding: 20px; display: flex; justify-content: center; }
        
        .container { background: #1e1e1e; width: 100%; max-width: 800px; border-radius: 12px; padding: 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.6); border: 1px solid #333; }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 15px; margin-bottom: 20px; flex-wrap: wrap; gap: 10px; }
        .header h2 { margin: 0; color: #00ffcc; font-size: 22px; }
        .stats { background: #2a2a2a; padding: 5px 10px; border-radius: 6px; font-size: 13px; color: #aaa; border: 1px solid #444; }

        /* Form, Search, & Buttons */
        .controls { display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        .input-group { display: flex; gap: 10px; flex: 1; min-width: 250px; flex-wrap: wrap; }
        input[type="text"] { flex: 1; min-width: 120px; padding: 10px; background: #2b2b2b; border: 1px solid #444; color: #fff; border-radius: 6px; outline: none; }
        input[type="text"]:focus { border-color: #00ffcc; }
        button { padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 5px; }
        button:hover { opacity: 0.8; }
        
        .btn-add { background: #28a745; color: white; flex: 1; min-width: 100px; }
        .btn-search { background: #444; color: white; flex: 1; min-width: 100px; }
        
        /* Table Layout */
        .table-wrapper { overflow-x: auto; background: #222; border: 1px solid #444; border-radius: 8px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; text-align: left; min-width: 500px; }
        th { background: #111; color: #00ffcc; padding: 12px; position: sticky; top: 0; }
        td { padding: 12px; border-bottom: 1px solid #333; word-break: break-all; }
        tr:hover { background: #2a2a2a; }
        
        .val-cell { color: #ccc; font-family: monospace; }
        .action-btns { display: flex; gap: 5px; }
        .btn-icon { padding: 6px 10px; font-size: 14px; border-radius: 4px; }
        .btn-edit { background: #ffc107; color: #000; }
        .btn-copy { background: #007bff; color: #fff; }
        .btn-del { background: #dc3545; color: #fff; }

        /* Bottom Actions */
        .bottom-actions { display: flex; gap: 10px; flex-wrap: wrap; }
        .bottom-actions button { flex: 1; min-width: 140px; }
        .btn-export { background: #17a2b8; color: white; }
        .btn-import { background: #6f42c1; color: white; }
        .btn-clear { background: #dc3545; color: white; width: 100%; margin-top: 10px; }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 15px; }
            .input-group { flex-direction: column; width: 100%; }
            .controls { flex-direction: column; }
            button { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h2>üöÄ Super LS Manager</h2>
            <div class="stats" id="ls-size">Size: 0 KB</div>
        </div>

        <div class="controls">
            <input type="text" id="search-input" placeholder="üîç Cari Key atau Value..." onkeyup="app.render()">
        </div>

        <div class="controls">
            <div class="input-group">
                <input type="text" id="input-key" placeholder="Key (Kunci)...">
                <input type="text" id="input-val" placeholder="Value (Isi Data)...">
            </div>
            <button class="btn-add" onclick="app.save()">üíæ Save</button>
        </div>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th style="width: 30%;">Key</th>
                        <th style="width: 50%;">Value</th>
                        <th style="width: 20%;">Aksi</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    </tbody>
            </table>
        </div>

        <div class="bottom-actions">
            <button class="btn-export" onclick="app.export()">üì• Export JSON</button>
            <button class="btn-import" onclick="document.getElementById('import-file').click()">üì§ Import JSON</button>
            <input type="file" id="import-file" accept=".json" style="display:none;" onchange="app.import(event)">
        </div>
        <button class="btn-clear" onclick="app.clearAll()">üö® HAPUS SEMUA DATA üö®</button>
    </div>

    <script>
        const app = {
            // Render Tabel & Filter Search
            render: function() {
                const tbody = document.getElementById('table-body');
                const searchQ = document.getElementById('search-input').value.toLowerCase();
                tbody.innerHTML = '';
                
                let totalSize = 0;

                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    const val = localStorage.getItem(key);
                    
                    // Hitung estimasi ukuran (bytes)
                    totalSize += (key.length + val.length) * 2; 

                    // Fitur Pencarian (Filter)
                    if (key.toLowerCase().includes(searchQ) || val.toLowerCase().includes(searchQ)) {
                        let displayVal = val.length > 60 ? val.substring(0, 60) + '...' : val;

                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td><b>${key}</b></td>
                            <td class="val-cell" title='${val.replace(/'/g, "&#39;")}'>${displayVal}</td>
                            <td>
                                <div class="action-btns">
                                    <button class="btn-icon btn-edit" onclick="app.edit('${key}')" title="Edit">‚úèÔ∏è</button>
                                    <button class="btn-icon btn-copy" onclick="app.copy('${key}')" title="Copy Value">üìã</button>
                                    <button class="btn-icon btn-del" onclick="app.del('${key}')" title="Hapus">‚ùå</button>
                                </div>
                            </td>
                        `;
                        tbody.appendChild(tr);
                    }
                }

                // Update info ukuran storage
                const kb = (totalSize / 1024).toFixed(2);
                document.getElementById('ls-size').innerText = `Terpakai: ${kb} KB`;
            },

            // Tambah / Update Data
            save: function() {
                const k = document.getElementById('input-key').value.trim();
                const v = document.getElementById('input-val').value.trim();
                if (k) {
                    localStorage.setItem(k, v);
                    document.getElementById('input-key').value = '';
                    document.getElementById('input-val').value = '';
                    this.render();
                } else {
                    alert('Key tidak boleh kosong!');
                }
            },

            // Siapin data buat diedit ke form atas
            edit: function(key) {
                document.getElementById('input-key').value = key;
                document.getElementById('input-val').value = localStorage.getItem(key);
                window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll otomatis ke atas
            },

            // Copy Value ke Clipboard
            copy: function(key) {
                const val = localStorage.getItem(key);
                navigator.clipboard.writeText(val).then(() => {
                    alert('‚úÖ Value berhasil di-copy!');
                });
            },

            // Hapus 1 Item
            del: function(key) {
                if(confirm(`Hapus data dengan key: "${key}"?`)) {
                    localStorage.removeItem(key);
                    this.render();
                }
            },

            // Hapus Semua
            clearAll: function() {
                if(confirm('üî• YAKIN HAPUS SEMUA DATA LOCALSTORAGE? üî•')) {
                    localStorage.clear();
                    this.render();
                }
            },

            // Export ke JSON
            export: function() {
                if(localStorage.length === 0) return alert('Data kosong, tidak ada yang bisa di-export.');
                let data = {};
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    data[key] = localStorage.getItem(key);
                }
                const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = `LS_Backup_${new Date().getTime()}.json`;
                a.click();
            },

            // Import dari JSON
            import: function(e) {
                const file = e.target.files[0];
                if(!file) return;
                const reader = new FileReader();
                reader.onload = function(evt) {
                    try {
                        const data = JSON.parse(evt.target.result);
                        for(let key in data) {
                            localStorage.setItem(key, data[key]);
                        }
                        app.render();
                        alert('‚úÖ Import sukses!');
                    } catch(err) {
                        alert('‚ùå Error: Format JSON tidak valid!');
                    }
                };
                reader.readAsText(file);
                e.target.value = ''; 
            }
        };

        // Render pas web pertama kali dibuka
        app.render();
    </script>
</body>
</html>
